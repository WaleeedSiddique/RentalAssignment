@using System.Globalization
@using RentalAssignment.Enums;
@model IEnumerable<Rental>

@{
    var firstReservation = Model.FirstOrDefault();
    var monthName = (firstReservation != null)
        ? DateTimeFormatInfo.CurrentInfo.GetMonthName(firstReservation.Pickup.Month)
        : string.Empty;
    var year = (firstReservation != null)
        ? firstReservation.Pickup.Year.ToString()
        : string.Empty;
    ViewBag.Title = "Monthly Reservation Report";
}

<h2 class="text-center-danger">@ViewData["Title"]</h2>
<form asp-controller="Rental" asp-action="MonthlyReport" method="get">
   <div class="form-group d-flex">
        <label style="font-size:17px; padding-top:6px;" for="month">Select Month:</label>
        <select class="form-select col-3 m-1" id="month" name="month">
            @foreach (var month in Enum.GetValues(typeof(MonthsEnum)))
            {
                <option value="@month">@month</option>
            }
        </select>
        <label style="font-size:17px; padding-top:6px;" for="year">Enter Year:</label>
        <input class="form-control col-3 m-1" type="number" id="year" name="year" />
        <button class="btn btn-primary ml-2" type="submit">Search</button>
   </div>
   
</form>

<p>Displaying reservations for @monthName @year</p>

<table class="table">
    <thead class="thead-dark">
        <tr>
            <th>Reservation ID</th>
            <th>Reservation Date</th>
            <th>Vehicle ID</th>
            <th>Driver ID</th>
            <!-- Add other reservation-related columns as needed -->
        </tr>
    </thead>
    <tbody>        
        @foreach (var reservation in Model)
        {
            <tr>
                <td>@reservation.RentalID</td>
                <td>@reservation.Pickup.ToString("MM/dd/yyyy HH:mm:ss")</td>
                <td>@reservation.VehicleID</td>
                <td>@reservation.DriverId</td>
                <!-- Add other reservation-related data here -->
            </tr>
        }
        @if (Model.Count() < 1)
        {
            <h2 class="text-warning text-center">No Bookings Available</h2>
        }
    </tbody>
</table>
