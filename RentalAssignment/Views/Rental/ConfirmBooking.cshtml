<!-- ConfirmBooking.cshtml -->
@model BookingConfirmViewModel

<h2>Confirm Booking</h2>
<p>Customer: @Model.Booking.RentalName</p>
<p>Status: @if (Model.Booking.BookingStatus)
    {
        <span class="text-success">Confirmed</span>
    }
    else
    {
        <span class="text-warning">Pending</span>
    }</p>

<table class="model-state">
    @foreach (var item in ViewContext.ViewData.ModelState)
    {
        if (item.Value.Errors.Any())
        {
            <tr>
                <td><b>@item.Key</b></td>
                <td>@((item.Value == null || item.Value == null) ? "<null>" : item.Value.RawValue)</td>
                <td>@(string.Join("; ", item.Value.Errors.Select(x => x.ErrorMessage)))</td>
            </tr>
        }
    }
</table>

<style>
    table.model-state {
        border-color: #600;
        border-width: 0 0 1px 1px;
        border-style: solid;
        border-collapse: collapse;
        font-size: .8em;
        font-family: arial;
    }

        table.model-state td {
            border-color: #600;
            border-width: 1px 1px 0 0;
            border-style: solid;
            margin: 0;
            padding: .25em .75em;
            background-color: #FFC;
        }
</style>


@if (!Model.Booking.BookingStatus)
{
    <form asp-controller="Rental" asp-action="AssignDriver" method="post">
        <input type="hidden" asp-for="RentalID"  />
        
        <div class="form-group">
            <label asp-for="SelectedDriverId">Select Driver:</label>
            <select asp-for="SelectedDriverId" asp-items="Model.AvailableDrivers" class="form-control"></select>
            <span asp-validation-for="SelectedDriverId" class="text-danger"></span>
        </div>
        <button type="submit" class="btn btn-primary">Assign Driver</button>
    </form>
}